DROP TABLE DRIVER_TABLE;
DROP SEQUENCE D_NO_SEQ;

CREATE SEQUENCE D_NO_SEQ;

CREATE TABLE DRIVER_TABLE(
	D_NO NUMBER NOT NULL,
	D_PROFILE VARCHAR2(1000),
	D_REGION VARCHAR2(100) NOT NULL,
	D_NAME VARCHAR2(100) NOT NULL,
	D_ID VARCHAR2(100) NOT NULL,
	D_PW VARCHAR2(100) NOT NULL,
	D_BIRTH VARCHAR2(6) NOT NULL,
	D_GENDER VARCHAR2(2) NOT NULL,
	D_PHONE VARCHAR2(100) NOT NULL,
	D_EMAIL VARCHAR2(100) NOT NULL,
	D_ENABLED VARCHAR2(2) NOT NULL,
	D_LICENSE VARCHAR2(100) NOT NULL,
	D_CARNUM VARCHAR2(100) NOT NULL,
	D_ROLE VARCHAR2(50) NOT NULL,
	D_TITLE VARCHAR2(1000),
	D_CONTENT VARCHAR2(2000),

	CONSTRAINT DRIVER_TABLE_PK PRIMARY KEY(D_NO),
	CONSTRAINT DRIVER_TABLE_UQ_ID UNIQUE(D_ID),
	CONSTRAINT DRIVER_TABLE_GENDER_CHK CHECK(D_GENDER IN ('M','W')),
	CONSTRAINT DRIVER_TABLE_UQ_PHONE UNIQUE(D_PHONE),
	CONSTRAINT DRIVER_TABLE_UQ_EMAIL UNIQUE(D_EMAIL),
	CONSTRAINT DRIVER_TABLE_D_ROLE_CHK CHECK(D_ROLE IN ('ADMIN','USER','DRIVER')),
	CONSTRAINT DRIVER_TABLE_ENABLED_CHK CHECK(D_ENABLED IN ('Y','N')),
	CONSTRAINT DRIVER_TABLE_UQ_D_LICENSE UNIQUE(D_LICENSE),
	CONSTRAINT DRIVER_TABLE_UQ_D_CARNUM UNIQUE(D_CARNUM)
);


INSERT INTO DRIVER_TABLE VALUES(D_NO_SEQ.NEXTVAL, NULL, '서울','김단비', 'test1', 'test1', '850623','W','010-1234-5678','test11@gamil.com','Y','26-08-004796-50','49조2811','DRIVER','안녕하세요','반갑습니다');

DELETE FROM DRIVER_TABLE WHERE D_NO = 13;

SELECT * FROM DRIVER_TABLE;

SELECT US.U_NAME, DR.D_NO, SH.U_NO, SH.S_SEQ, SH.S_DATE, SH.S_TIME, SH.S_LOCATION, SH.S_COURSE, SH.S_PEOPLE, SH.S_PRICE, SH.S_REGDATE, SH.S_LATITUDE, SH.S_LONGITUDE, SH.S_CONFIRMED_CHECK
FROM DRIVER_TABLE DR, SCHEDULE_TABLE SH, USER_TABLE US
WHERE DR.D_NO = SH.D_NO AND SH.U_NO = US.U_NO
AND DR.D_NO = (SELECT D_NO FROM SCHEDULE_TABLE WHERE U_NO = 6);

SELECT US.U_NO, US.U_NAME, US.U_PHONE, SH.D_NO, DR.D_PROFILE, DR.D_REGION, DR.D_NAME, DR.D_BIRTH, DR.D_GENDER, DR.D_TITLE, DR.D_CONTENT, SH.U_NO, SH.S_SEQ, SH.S_DATE, SH.S_TIME, SH.S_LOCATION, SH.S_COURSE, SH.S_PEOPLE, SH.S_PRICE, SH.S_REGDATE, SH.S_LATITUDE, SH.S_LONGITUDE, SH.S_CONFIRMED_CHECK
FROM SCHEDULE_TABLE SH
INNER JOIN DRIVER_TABLE DR
ON SH.D_NO = DR.D_NO
INNER JOIN USER_TABLE US
ON SH.U_NO = US.U_NO
WHERE SH.U_NO = 4;



